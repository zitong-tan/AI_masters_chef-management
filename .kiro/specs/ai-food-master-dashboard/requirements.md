# 需求文档

## 简介

AI美食大师管理系统是一个基于Vue.js和Supabase的数据可视化管理平台。该系统通过图表和多样化的可视化组件展示用户数据、菜谱数据、美食社区数据和食材管理数据，帮助管理员全面了解平台运营状况。

## 术语表

- **管理系统（Management System）**: 用于管理和可视化AI美食大师平台数据的Web应用程序
- **Supabase**: 开源的Firebase替代品，提供数据库、认证和实时订阅功能
- **仪表板（Dashboard）**: 显示关键指标和数据可视化的主界面
- **用户菜品表（user_dishes）**: 存储用户创建的菜谱信息的数据库表
- **用户评论表（user_comments）**: 存储用户评论信息的数据库表
- **食材表（foods）**: 存储用户食材库存信息的数据库表
- **过期食材视图（expiring_foods）**: 显示即将过期食材的数据库视图
- **图表组件（Chart Component）**: 用于数据可视化的UI组件

## 需求

### 需求 1

**用户故事:** 作为管理员，我想要查看平台的整体数据概览，以便快速了解平台的运营状况。

#### 验收标准

1. WHEN 管理员访问仪表板首页 THEN 管理系统应显示包含关键指标的概览卡片
2. WHEN 仪表板加载数据 THEN 管理系统应从Supabase数据库获取最新的统计数据
3. WHEN 数据加载失败 THEN 管理系统应显示友好的错误提示信息
4. WHEN 显示统计数据 THEN 管理系统应包含用户总数、菜谱总数、评论总数和食材总数
5. WHEN 数据更新 THEN 管理系统应在5秒内反映最新的数据变化

### 需求 2

**用户故事:** 作为管理员，我想要通过图表查看菜谱的分类分布，以便了解用户最喜欢的菜系类型。

#### 验收标准

1. WHEN 管理员查看菜谱分析模块 THEN 管理系统应显示按菜系分类的饼图或柱状图
2. WHEN 图表渲染数据 THEN 管理系统应统计每个菜系的菜谱数量
3. WHEN 用户点击图表区域 THEN 管理系统应显示该分类的详细信息
4. WHEN 菜系数据为空 THEN 管理系统应显示"暂无数据"的提示
5. WHEN 图表加载 THEN 管理系统应使用不同颜色区分不同菜系

### 需求 3

**用户故事:** 作为管理员，我想要查看菜谱创建的时间趋势，以便分析平台的活跃度变化。

#### 验收标准

1. WHEN 管理员查看趋势分析 THEN 管理系统应显示菜谱创建数量的时间折线图
2. WHEN 选择时间范围 THEN 管理系统应支持按日、周、月查看数据
3. WHEN 图表显示数据 THEN 管理系统应在X轴显示时间，Y轴显示数量
4. WHEN 鼠标悬停在数据点 THEN 管理系统应显示该时间点的具体数值
5. WHEN 时间范围改变 THEN 管理系统应重新查询并更新图表数据

### 需求 4

**用户故事:** 作为管理员，我想要查看用户活跃度排行，以便识别平台的核心用户。

#### 验收标准

1. WHEN 管理员查看用户分析 THEN 管理系统应显示用户活跃度排行榜
2. WHEN 计算活跃度 THEN 管理系统应基于用户创建的菜谱数量和评论数量
3. WHEN 显示排行榜 THEN 管理系统应展示前10名最活跃用户
4. WHEN 用户数据更新 THEN 管理系统应自动重新计算排名
5. WHEN 点击用户名 THEN 管理系统应显示该用户的详细信息

### 需求 5

**用户故事:** 作为管理员，我想要查看食材库存和过期情况，以便提醒用户及时处理即将过期的食材。

#### 验收标准

1. WHEN 管理员查看食材管理模块 THEN 管理系统应显示食材总量统计
2. WHEN 查询过期食材 THEN 管理系统应从expiring_foods视图获取7天内过期的食材
3. WHEN 显示过期预警 THEN 管理系统应使用不同颜色标识不同紧急程度
4. WHEN 食材即将过期（3天内） THEN 管理系统应使用红色高亮显示
5. WHEN 食材较远过期（4-7天） THEN 管理系统应使用黄色警告显示

### 需求 6

**用户故事:** 作为管理员，我想要查看评论的时间分布和内容统计，以便了解社区的互动情况。

#### 验收标准

1. WHEN 管理员查看社区分析 THEN 管理系统应显示评论数量的时间分布图
2. WHEN 统计评论数据 THEN 管理系统应计算每日评论总数
3. WHEN 显示评论列表 THEN 管理系统应展示最新的20条评论
4. WHEN 评论内容过长 THEN 管理系统应截断显示并提供展开功能
5. WHEN 评论数据更新 THEN 管理系统应实时刷新显示

### 需求 7

**用户故事:** 作为管理员，我想要查看菜谱难度分布，以便了解平台内容的难易程度。

#### 验收标准

1. WHEN 管理员查看菜谱分析 THEN 管理系统应显示按难度分类的统计图表
2. WHEN 统计难度数据 THEN 管理系统应分别计算简单、中等、困难三个级别的菜谱数量
3. WHEN 显示难度分布 THEN 管理系统应使用环形图或柱状图展示
4. WHEN 难度字段为空 THEN 管理系统应将其归类为"未分类"
5. WHEN 图表渲染 THEN 管理系统应显示每个难度级别的百分比

### 需求 8

**用户故事:** 作为管理员，我想要系统具有响应式设计，以便在不同设备上都能正常使用。

#### 验收标准

1. WHEN 在桌面浏览器访问 THEN 管理系统应以多列布局显示图表
2. WHEN 在平板设备访问 THEN 管理系统应调整为两列布局
3. WHEN 在移动设备访问 THEN 管理系统应调整为单列布局
4. WHEN 屏幕尺寸改变 THEN 管理系统应自动调整图表大小和布局
5. WHEN 图表在小屏幕显示 THEN 管理系统应保持图表的可读性

### 需求 9

**用户故事:** 作为管理员，我想要系统能够处理数据加载状态，以便提供良好的用户体验。

#### 验收标准

1. WHEN 数据正在加载 THEN 管理系统应显示加载动画或骨架屏
2. WHEN 数据加载完成 THEN 管理系统应移除加载状态并显示实际内容
3. WHEN 数据加载超时（10秒） THEN 管理系统应显示超时错误提示
4. WHEN 用户刷新页面 THEN 管理系统应重新加载所有数据
5. WHEN 网络连接失败 THEN 管理系统应显示网络错误提示并提供重试按钮

### 需求 10

**用户故事:** 作为管理员，我想要能够导出数据报表，以便进行离线分析和存档。

#### 验收标准

1. WHEN 管理员点击导出按钮 THEN 管理系统应生成包含当前数据的报表文件
2. WHEN 选择导出格式 THEN 管理系统应支持CSV和JSON两种格式
3. WHEN 导出数据 THEN 管理系统应包含所有可见图表的原始数据
4. WHEN 导出完成 THEN 管理系统应自动下载文件到本地
5. WHEN 导出失败 THEN 管理系统应显示错误信息并允许重试
